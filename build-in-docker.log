trace: Warning: `stdenv.lib` is deprecated and will be removed in the next release. Please use `lib` instead. For more information see https://github.com/NixOS/nixpkgs/issues/108938
building '/nix/store/3ddkzxnrsqsldzyy1sg9vmch3jixhl48-cabal2nix-cardano-binary.drv'...
installing
warning: unknown setting 'access-tokens'
warning: unknown setting 'experimental-features'
error: unable to download '/nix/store/a8k0dmxbss5sq4d26vanzs41vifn77l4-cardano-base-src/binary': URL using bad/illegal format or missing URL (3)
warning: unknown setting 'access-tokens'
warning: unknown setting 'experimental-features'
error: unable to download '/nix/store/a8k0dmxbss5sq4d26vanzs41vifn77l4-cardano-base-src/binary': URL using bad/illegal format or missing URL (3)
** need a revision for VCS when the hash is given. skipping.
** need a revision for VCS when the hash is given. skipping.
** need a revision for VCS when the hash is given. skipping.
** need a revision for VCS when the hash is given. skipping.
cabal2nix: user error (Failed to fetch source. Does this source exist? Source {sourceUrl = "/nix/store/a8k0dmxbss5sq4d26vanzs41vifn77l4-cardano-base-src/binary", sourceRevision = "", sourceHash = Guess "", sourceCabalDir = ""})
note: keeping build directory '/nix/var/nix/builds/nix-112-1516774396'
error:
       … while calling the 'derivationStrict' builtin
         at «nix-internal»/derivation-internal.nix:37:12:
           36|
           37|   strict = derivationStrict drvAttrs;
             |            ^
           38|

       … while evaluating derivation 'cardano-api-1.35.7'
         whose name attribute is located at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/stdenv/generic/make-derivation.nix:201:11

       … while evaluating attribute 'propagatedBuildInputs' of derivation 'cardano-api-1.35.7'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/stdenv/generic/make-derivation.nix:250:11:
          249|           depsHostHostPropagated      = lib.elemAt (lib.elemAt propagatedDependencies 1) 0;
          250|           propagatedBuildInputs       = lib.elemAt (lib.elemAt propagatedDependencies 1) 1;
             |           ^
          251|           depsTargetTargetPropagated  = lib.elemAt (lib.elemAt propagatedDependencies 2) 0;

       … while calling 'getOutput'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/lib/attrsets.nix:486:23:
          485|   */
          486|   getOutput = output: pkg:
             |                       ^
          487|     if pkg.outputUnspecified or false

       … while evaluating a branch condition
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/lib/attrsets.nix:487:5:
          486|   getOutput = output: pkg:
          487|     if pkg.outputUnspecified or false
             |     ^
          488|       then pkg.${output} or pkg.out or pkg

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/lib/attrsets.nix:487:8:
          486|   getOutput = output: pkg:
          487|     if pkg.outputUnspecified or false
             |        ^
          488|       then pkg.${output} or pkg.out or pkg

       … while calling anonymous lambda
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/stdenv/generic/make-derivation.nix:166:17:
          165|           (map (drv: drv.__spliced.hostHost or drv) depsHostHostPropagated)
          166|           (map (drv: drv.crossDrv or drv) propagatedBuildInputs)
             |                 ^
          167|         ]

       … from call site
         at /work/cardano-project/cardano-overlays/cardano-packages/default.nix:29:20:
           28|   # Use callCabal2nix on a realized directory to avoid VCS/re-fetch confusion.
           29|   cardano-binary = haskellLib.enableCabalFlag (
             |                    ^
           30|     self.callCabal2nix "cardano-binary" (cardanoBaseSrc + "/binary") {}

       … while calling 'enableCabalFlag'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:168:26:
          167|
          168|   enableCabalFlag = drv: x: appendConfigureFlag (removeConfigureFlag drv "-f-${x}") "-f${x}";
             |                          ^
          169|   disableCabalFlag = drv: x: appendConfigureFlag (removeConfigureFlag drv "-f${x}") "-f-${x}";

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:168:29:
          167|
          168|   enableCabalFlag = drv: x: appendConfigureFlag (removeConfigureFlag drv "-f-${x}") "-f${x}";
             |                             ^
          169|   disableCabalFlag = drv: x: appendConfigureFlag (removeConfigureFlag drv "-f${x}") "-f-${x}";

       … while calling 'appendConfigureFlag'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:137:30:
          136|    */
          137|   appendConfigureFlag = drv: x: appendConfigureFlags drv [x];
             |                              ^
          138|   appendConfigureFlags = drv: xs: overrideCabal drv (drv: { configureFlags = (drv.configureFlags or []) ++ xs; });

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:137:33:
          136|    */
          137|   appendConfigureFlag = drv: x: appendConfigureFlags drv [x];
             |                                 ^
          138|   appendConfigureFlags = drv: xs: overrideCabal drv (drv: { configureFlags = (drv.configureFlags or []) ++ xs; });

       … while calling 'appendConfigureFlags'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:138:31:
          137|   appendConfigureFlag = drv: x: appendConfigureFlags drv [x];
          138|   appendConfigureFlags = drv: xs: overrideCabal drv (drv: { configureFlags = (drv.configureFlags or []) ++ xs; });
             |                               ^
          139|

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:138:35:
          137|   appendConfigureFlag = drv: x: appendConfigureFlags drv [x];
          138|   appendConfigureFlags = drv: xs: overrideCabal drv (drv: { configureFlags = (drv.configureFlags or []) ++ xs; });
             |                                   ^
          139|

       … while calling 'overrideCabal'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:24:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                        ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … in the left operand of the update (//) operator
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:28:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                            ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:168:50:
          167|
          168|   enableCabalFlag = drv: x: appendConfigureFlag (removeConfigureFlag drv "-f-${x}") "-f${x}";
             |                                                  ^
          169|   disableCabalFlag = drv: x: appendConfigureFlag (removeConfigureFlag drv "-f${x}") "-f-${x}";

       … while calling 'removeConfigureFlag'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:148:30:
          147|    */
          148|   removeConfigureFlag = drv: x: overrideCabal drv (drv: { configureFlags = lib.remove x (drv.configureFlags or []); });
             |                              ^
          149|

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:148:33:
          147|    */
          148|   removeConfigureFlag = drv: x: overrideCabal drv (drv: { configureFlags = lib.remove x (drv.configureFlags or []); });
             |                                 ^
          149|

       … while calling 'overrideCabal'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:24:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                        ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … in the left operand of the update (//) operator
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:28:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                            ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … from call site
         at /work/cardano-project/cardano-overlays/cardano-packages/default.nix:30:5:
           29|   cardano-binary = haskellLib.enableCabalFlag (
           30|     self.callCabal2nix "cardano-binary" (cardanoBaseSrc + "/binary") {}
             |     ^
           31|   ) "development";

       … while calling 'callCabal2nix'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:220:32:
          219|
          220|     callCabal2nix = name: src: args: self.callCabal2nixWithOptions name src "" args;
             |                                ^
          221|

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:220:38:
          219|
          220|     callCabal2nix = name: src: args: self.callCabal2nixWithOptions name src "" args;
             |                                      ^
          221|

       … while calling 'callCabal2nixWithOptions'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:205:66:
          204|     # Creates a Haskell package from a source package by calling cabal2nix on the source.
          205|     callCabal2nixWithOptions = name: src: extraCabal2nixOptions: args:
             |                                                                  ^
          206|       let

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:216:10:
          215|         };
          216|       in overrideCabal (callPackageKeepDeriver expr args) (orig: {
             |          ^
          217|            inherit src;

       … while calling 'overrideCabal'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:24:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                        ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … in the left operand of the update (//) operator
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:28:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                            ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:216:25:
          215|         };
          216|       in overrideCabal (callPackageKeepDeriver expr args) (orig: {
             |                         ^
          217|            inherit src;

       … while calling 'callPackageKeepDeriver'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:161:33:
          160|   # annoyance.
          161|   callPackageKeepDeriver = src: args:
             |                                 ^
          162|     overrideCabal (self.callPackage src args) (orig: {

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:162:5:
          161|   callPackageKeepDeriver = src: args:
          162|     overrideCabal (self.callPackage src args) (orig: {
             |     ^
          163|       preConfigure = ''

       … while calling 'overrideCabal'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:24:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                        ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … in the left operand of the update (//) operator
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/lib.nix:37:28:
           36|    */
           37|   overrideCabal = drv: f: (drv.override (args: args // {
             |                            ^
           38|     mkDerivation = drv: (args.mkDerivation drv).override f;

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:162:20:
          161|   callPackageKeepDeriver = src: args:
          162|     overrideCabal (self.callPackage src args) (orig: {
             |                    ^
          163|       preConfigure = ''

       … while calling 'callPackage'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:118:22:
          117|   defaultScope = mkScope self;
          118|   callPackage = drv: args: callPackageWithScope defaultScope drv args;
             |                      ^
          119|

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:118:28:
          117|   defaultScope = mkScope self;
          118|   callPackage = drv: args: callPackageWithScope defaultScope drv args;
             |                            ^
          119|

       … while calling 'callPackageWithScope'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:78:37:
           77|   # here `bar` is a manual argument.
           78|   callPackageWithScope = scope: fn: manualArgs:
             |                                     ^
           79|     let

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:101:8:
          100|       };
          101|     in lib.makeOverridable drvScope (auto // manualArgs);
             |        ^
          102|

       … while calling 'makeOverridable'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/lib/customisation.nix:67:24:
           66|   */
           67|   makeOverridable = f: origArgs:
             |                        ^
           68|     let

       … while evaluating a branch condition
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/lib/customisation.nix:81:7:
           80|     in
           81|       if builtins.isAttrs result then
             |       ^
           82|         result // {

       … while calling the 'isAttrs' builtin
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/lib/customisation.nix:81:10:
           80|     in
           81|       if builtins.isAttrs result then
             |          ^
           82|         result // {

       … from call site
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/lib/customisation.nix:69:16:
           68|     let
           69|       result = f origArgs;
             |                ^
           70|

       … while calling 'drvScope'
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:91:18:
           90|       # this wraps the `drv` function to add a `overrideScope` function to the result.
           91|       drvScope = allArgs: drv allArgs // {
             |                  ^
           92|         overrideScope = f:

       … in the left operand of the update (//) operator
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:91:27:
           90|       # this wraps the `drv` function to add a `overrideScope` function to the result.
           91|       drvScope = allArgs: drv allArgs // {
             |                           ^
           92|         overrideScope = f:

       … while calling the 'import' builtin
         at /nix/store/fv90cbnl3q61a8zhxghzbimxgnk850hj-source/pkgs/development/haskell-modules/make-package-set.nix:87:47:
           86|       # info that callPackage uses to determine the arguments).
           87|       drv = if lib.isFunction fn then fn else import fn;
             |                                               ^
           88|       auto = builtins.intersectAttrs (lib.functionArgs drv) scope;

       … while realising the context of path '/nix/store/6l7hm03d6s7m1cy8kc6lam839lgfyz8k-cabal2nix-cardano-binary'

       error: Cannot build '/nix/store/3ddkzxnrsqsldzyy1sg9vmch3jixhl48-cabal2nix-cardano-binary.drv'.
       Reason: builder failed with exit code 1.
       Output paths:
         /nix/store/6l7hm03d6s7m1cy8kc6lam839lgfyz8k-cabal2nix-cardano-binary
